
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../install_start_project/">
      
      
        <link rel="next" href="../auth_spa/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.4">
    
    
      
        <title>Корпорат на шаблонах - GarpixCMS</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.240905d7.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../" title="GarpixCMS" class="md-header__button md-logo" aria-label="GarpixCMS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GarpixCMS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Корпорат на шаблонах
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../../../examples/simple_templates_site/" hreflang="ru" class="md-select__link">
                    Russian
                  </a>
                </li>
              
                <li class="md-select__item">
                  <a href="./" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/garpixcms/garpixcms" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../" title="GarpixCMS" class="md-nav__button md-logo" aria-label="GarpixCMS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    GarpixCMS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/garpixcms/garpixcms" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        Quick Start
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Install
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install_deps/" class="md-nav__link">
        Install dependencies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install_new_project/" class="md-nav__link">
        Start new project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../install_start_project/" class="md-nav__link">
        Start project
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Корпорат на шаблонах
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Корпорат на шаблонах
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    Шаг 1. Создание нового проекта
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    Шаг 2. Создаем необходимые страницы в коде
  </a>
  
    <nav class="md-nav" aria-label="Шаг 2. Создаем необходимые страницы в коде">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1. Создаем главную страницу
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    2.2. Создаем страницу Контакты
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3. Создаем новости
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    2.4. Создаем поисковую страницу
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-garpixcmspage" class="md-nav__link">
    2.5. Для страницы "О нас" будем использовать стандартные страницы garpixcms.Page (см. ниже).
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    Шаг 3. Настраиваем страницы
  </a>
  
    <nav class="md-nav" aria-label="Шаг 3. Настраиваем страницы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 Главная страница
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2 Страница Контакты
  </a>
  
    <nav class="md-nav" aria-label="3.2 Страница Контакты">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321" class="md-nav__link">
    3.2.1. Наполнение страницы Контакты
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" class="md-nav__link">
    3.2.2. Реализация формы обратной связи
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" class="md-nav__link">
    3.2.3. Отправка уведомления
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    3.3. Новости
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    3.4. Страница поиска
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    3.5. Страница "О нас"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36" class="md-nav__link">
    3.6. Меню
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37" class="md-nav__link">
    3.7. Карта сайта
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auth_spa/" class="md-nav__link">
        Пример реализации входа на SPA-сайт (React, Vue.js, Angular)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auth_templates/" class="md-nav__link">
        Пример реализации входа на сайт на шаблонах
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          Social authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Social authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auth/apple/" class="md-nav__link">
        Apple ID
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../auth/google/" class="md-nav__link">
        Google
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notify/" class="md-nav__link">
        Пример уведомлений на сайте
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Packages
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Packages
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/packages/" class="md-nav__link">
        All packages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_notify/" class="md-nav__link">
        Notify
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_page/" class="md-nav__link">
        Page
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_menu/" class="md-nav__link">
        Menu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_auth/" class="md-nav__link">
        Auth (old)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_user/" class="md-nav__link">
        User
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_qa/" class="md-nav__link">
        Eqator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/garpix_company/" class="md-nav__link">
        Company
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../packages/utils/" class="md-nav__link">
        Utils
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          FAQ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          FAQ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faq_cors/" class="md-nav__link">
        CORS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faq_pack/" class="md-nav__link">
        Создание своего пакета
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../faq_list_per_page/" class="md-nav__link">
        Количество выводимых записей в Структуре страниц
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Migrations
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Migrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../migrate/migrate_1.15.0_to_2.0.0/" class="md-nav__link">
        1.15.0 -> 2.0.0
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Old
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Old
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deprecated/example_simple_templates_site_deprecated_2021-09-10/" class="md-nav__link">
        Простой корпорат на шаблонах (устарел 10.09.2021)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    Шаг 1. Создание нового проекта
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    Шаг 2. Создаем необходимые страницы в коде
  </a>
  
    <nav class="md-nav" aria-label="Шаг 2. Создаем необходимые страницы в коде">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    2.1. Создаем главную страницу
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22" class="md-nav__link">
    2.2. Создаем страницу Контакты
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    2.3. Создаем новости
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24" class="md-nav__link">
    2.4. Создаем поисковую страницу
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25-garpixcmspage" class="md-nav__link">
    2.5. Для страницы "О нас" будем использовать стандартные страницы garpixcms.Page (см. ниже).
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    Шаг 3. Настраиваем страницы
  </a>
  
    <nav class="md-nav" aria-label="Шаг 3. Настраиваем страницы">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    3.1 Главная страница
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32" class="md-nav__link">
    3.2 Страница Контакты
  </a>
  
    <nav class="md-nav" aria-label="3.2 Страница Контакты">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#321" class="md-nav__link">
    3.2.1. Наполнение страницы Контакты
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#322" class="md-nav__link">
    3.2.2. Реализация формы обратной связи
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#323" class="md-nav__link">
    3.2.3. Отправка уведомления
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    3.3. Новости
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34" class="md-nav__link">
    3.4. Страница поиска
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    3.5. Страница "О нас"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36" class="md-nav__link">
    3.6. Меню
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#37" class="md-nav__link">
    3.7. Карта сайта
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="_1">Корпорат на шаблонах</h1>
<p>Пример простого корпоративного сайта на шаблонах.</p>
<p>Сайт должен включать в себя следующее:</p>
<ul>
<li>Главная страница</li>
<li>Новости список</li>
<li>Новость детальная</li>
<li>О нас</li>
<li>Контакты</li>
</ul>
<h3 id="1">Шаг 1. Создание нового проекта</h3>
<p>Для начала, создайте новый проект по <a href="../../install_new_project/">документации</a>.</p>
<p>Далее необходимо смигрировать, создать пользователя и запустить сервер:</p>
<pre><code class="language-bash">python3 backend/manage.py migrate
python3 backend/manage.py createsuperuser
python3 backend/manage.py runserver
</code></pre>
<p>И не забывайте использовать контроль версий:</p>
<pre><code>git init
</code></pre>
<p>Если на <a href="http://localhost:8000">http://localhost:8000</a> вы видите надпись "Ура, работает!", то можно переходить к следующему шагу.</p>
<p><img alt="Ура, работает" src="/example_simple_templates_site/images/corp_hooray.png" /></p>
<h3 id="2">Шаг 2. Создаем необходимые страницы в коде</h3>
<p>В зависимости от функциональных возможностей сайта, могут потребоваться страницы
с различным контекстом. В GarpixCMS есть возможность создавать из административной панели
страницы с различным наполнением и поддержкой ЧПУ с сохранением возможности
разработчиком использовать различные представления и контексты для страниц.</p>
<p>Для создания страниц используется модуль <a href="https://github.com/garpixcms/garpix_page">garpix_page</a> с предустановленными параметрами
(вы можете их расширять).</p>
<p>Для начала надо понять терминологию:</p>
<ul>
<li>Страница (Page, Model Page) - это модель, дочерний класс от <code>BasePage</code>. Вы можете создавать их сами.</li>
<li>Контекст (Context) - функция, которая возвращает словарь. Находится в модели. Значения можно применять в шаблонах. Всегда включает в себя <code>object</code> (объект класса страницы) и <code>request</code>.</li>
<li>Шаблон (Template) - стандартный Django шаблон.</li>
</ul>
<p><strong>Для создания страниц будем использовать кодогенерацию.</strong></p>
<p>Параметры:</p>
<ul>
<li><code>--app</code> - приложение, в котором создать код. Если приложения не существует, то оно будет создано.</li>
<li><code>--page</code> - название страницы, в snake_case. Название класса будет преобразовано в CamelCase автоматически.</li>
<li><code>--base</code> - абстрактная модель, от которой наследовать страницы.</li>
</ul>
<p>Доступные варианты для параметра <code>--base</code>:</p>
<ul>
<li><code>page</code> - одиночная страница (наследник от <code>BasePage</code>) или детальная страница списка. Например, "пост", "главная", "контакты", "товар", "услуга".</li>
<li><code>list</code> - списочная страница (наследник от <code>BaseListPage</code>). Например, "новости", "акции", "товары", "услуги".</li>
<li><code>search</code> - поисковая страница (наследник от <code>BaseSearchPage</code>). Это простая реализация поиска. По умолчанию ищет только по заголовкам (<code>title</code>).</li>
</ul>
<h4 id="21">2.1. Создаем главную страницу</h4>
<pre><code class="language-bash">python3 backend/manage.py startpage --app=home --page=home --base=page
</code></pre>
<p>После этого будет создано новое приложение, добавлены модели, админка, класс для переводов, шаблон.</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_home_files.png" /></p>
<h4 id="22">2.2. Создаем страницу Контакты</h4>
<pre><code class="language-bash">python3 backend/manage.py startpage --app=contacts --page=contact --base=page
</code></pre>
<h4 id="23">2.3. Создаем новости</h4>
<pre><code class="language-bash">python3 backend/manage.py startpage --app=news --page=post_list --base=list

python3 backend/manage.py startpage --app=news --page=post --base=page
</code></pre>
<h4 id="24">2.4. Создаем поисковую страницу</h4>
<pre><code class="language-bash">python3 backend/manage.py startpage --app=search --page=search --base=search
</code></pre>
<h4 id="25-garpixcmspage">2.5. Для страницы "О нас" будем использовать стандартные страницы <code>garpixcms.Page</code> (см. ниже).</h4>
<h3 id="3">Шаг 3. Настраиваем страницы</h3>
<h4 id="31">3.1 Главная страница</h4>
<p>На главной странице добавим карусель изображений.</p>
<p>Для этого создадим обычную модель CarouselItem, которую будем связывать с главной страницей:</p>
<pre><code class="language-python"># backend/home/models/carousel_item.py
from django.db import models
from garpix_utils.file.file_field import get_file_path
from garpix_menu.mixins import LinkMixin
from .home_page import HomePage


class CarouselItem(LinkMixin):
    title = models.CharField(max_length=100, verbose_name='Заголовок')
    home_page = models.ForeignKey(HomePage, on_delete=models.CASCADE, verbose_name='Страница (привязка)', related_name='carousel_items')
    image = models.ImageField(upload_to=get_file_path, verbose_name='Изображение')
    sort = models.PositiveSmallIntegerField(default=100, verbose_name='Сортировка')

    def __str__(self):
        return self.title

    class Meta:
        verbose_name = 'Элемент карусели'
        verbose_name_plural = 'Элементы карусели'
        ordering = ('sort',)
</code></pre>
<p>Здесь мы импортировали <code>LinkMixin</code> из <code>garpix_menu</code> - это позволит ставить ссылку на
любую страницу или внешний URL для каждого объекта.</p>
<p>Также, не забудьте сделать еще две вещи:</p>
<p>Поправить <code>__init__.py</code>:</p>
<pre><code class="language-python"># backend/home/models/__init__.py
from .home_page import HomePage  # noqa
from .carousel_item import CarouselItem  # noqa
</code></pre>
<p>И добавить созданные нами приложения в <code>INSTALLED_APPS</code>:</p>
<pre><code class="language-python"># backend/app/settings.py
from garpixcms.settings import *  # noqa

INSTALLED_APPS += [  # noqa
    'home',
    'contacts',
    'news',
    'search',
]
</code></pre>
<p>После этого можно смигрировать:</p>
<pre><code class="language-bash">python3 backend/manage.py makemigrations
python3 backend/manage.py migrate
</code></pre>
<p>И сделать админку:</p>
<pre><code class="language-python"># backend/home/admin/carousel_item.py
from ..models.carousel_item import CarouselItem
from django.contrib import admin


class CarouselItemInline(admin.TabularInline):
    model = CarouselItem
    fk_name = 'home_page'
    fields = ('title', 'image', 'sort', 'page', 'url')
    extra = 1
</code></pre>
<p>Не забываем про <code>__init__.py</code>:</p>
<pre><code class="language-python"># backend/home/admin/__init__.py
from .home_page import HomePageAdmin  # noqa
from .carousel_item import CarouselItemInline  # noqa
</code></pre>
<p>И подключить к странице <code>HomePage</code> саму карусель:</p>
<pre><code class="language-python"># backend/home/admin/home_page.py
from django.contrib import admin
from garpix_page.admin import BasePageAdmin
from ..models.home_page import HomePage
from .carousel_item import CarouselItemInline


@admin.register(HomePage)
class HomePageAdmin(BasePageAdmin):
    inlines = (CarouselItemInline,)
</code></pre>
<p>Теперь можно попробовать запустить сервер (стандартный <code>python3 backend/manage.py runserver</code>) и создать
в "Структуре страниц" запись с "Home" со следующими данными:</p>
<ul>
<li>Название: Главная</li>
<li>ЧПУ: стираем, должно быть пустым</li>
<li>Сайты для отображения: Выбираем единственное значение (по умолчанию уже выбрано)</li>
<li>Можно также заполнить SEO-теги (далее вы сможете их увидеть, если откроете код страницы <a href="http://localhost:8000/">http://localhost:8000/</a>)</li>
</ul>
<p>Также, добавьте пару слайдов для карусели на ваш вкус.</p>
<p>После этого можно зайти на страницу <a href="http://localhost:8000">http://localhost:8000</a> и увидеть,
что отображается заголовок страницы, но нет нашей карусели.</p>
<p>Т.к. в шаблонах по умолчанию используется Bootstrap 5, то давайте просто возьмем
карусель оттуда и вставим в наш шаблон:</p>
<pre><code class="language-html">&lt;!-- frontend/templates/pages/home.html --&gt;
{% extends 'base.html' %}

{% block content %}
    &lt;h1&gt;{{ object.title }}&lt;/h1&gt;

    &lt;div id=&quot;carouselExampleControls&quot; class=&quot;carousel slide&quot; data-bs-ride=&quot;carousel&quot;&gt;
        &lt;div class=&quot;carousel-inner&quot;&gt;
            {% for item in object.carousel_items.all %}
                &lt;div class=&quot;carousel-item {% if forloop.first %}active{% endif %}&quot;&gt;
                    &lt;a href=&quot;{{ item.get_link }}&quot;&gt;
                        &lt;img class=&quot;d-block w-100&quot; src=&quot;{{ item.image.url }}&quot; alt=&quot;{{ item.title }}&quot;&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
            {% endfor %}
        &lt;/div&gt;
        &lt;button class=&quot;carousel-control-prev&quot; type=&quot;button&quot; data-bs-target=&quot;#carouselExampleControls&quot;
                data-bs-slide=&quot;prev&quot;&gt;
            &lt;span class=&quot;carousel-control-prev-icon&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;visually-hidden&quot;&gt;Previous&lt;/span&gt;
        &lt;/button&gt;
        &lt;button class=&quot;carousel-control-next&quot; type=&quot;button&quot; data-bs-target=&quot;#carouselExampleControls&quot;
                data-bs-slide=&quot;next&quot;&gt;
            &lt;span class=&quot;carousel-control-next-icon&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt;
            &lt;span class=&quot;visually-hidden&quot;&gt;Next&lt;/span&gt;
        &lt;/button&gt;
    &lt;/div&gt;
{% endblock %}
</code></pre>
<p>После этого снова можно зайти на главную страницу и увидеть, что карусель работает. Также, вы можете создать другие
страницы, чтобы поставить на них ссылки с карусели.</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_home_site.png" /></p>
<h4 id="32">3.2 Страница Контакты</h4>
<p>Теперь давайте сделаем страницу с формой обратной связи.</p>
<h5 id="321">3.2.1. Наполнение страницы Контакты</h5>
<p>В шаге 2.2 мы уже подготовили модель страницы контактов. Теперь давайте добавим в нее отличительных черт:</p>
<pre><code class="language-python"># backend/contacts/models/contact_page.py
from django.db import models
from ckeditor_uploader.fields import RichTextUploadingField
from garpix_page.models import BasePage


class ContactPage(BasePage):
    content = RichTextUploadingField(verbose_name='Содержание', blank=True, default='')
    postal_address = models.CharField(max_length=250, blank=True, default='', verbose_name='Почтовый адрес')

    template = &quot;pages/contact.html&quot;

    class Meta:
        verbose_name = &quot;Contact&quot;
        verbose_name_plural = &quot;Contacts&quot;
        ordering = (&quot;-created_at&quot;,)
</code></pre>
<p>Обычно, необходимо также указывать электронную почту и номер телефона. Но они располагаются на всех страницах, поэтому
в контакты мы их не стали включать - вы можете сделать их глобальными через <code>django-solo</code>.
Реализуется как описано в документации <a href="https://github.com/lazybird/django-solo">https://github.com/lazybird/django-solo</a>.</p>
<p>Можно мигрировать:</p>
<pre><code class="language-bash">python3 backend/manage.py makemigrations
python3 backend/manage.py migrate
</code></pre>
<p>Давайте поправим шаблон страницы "Контакты":</p>
<pre><code class="language-html">&lt;!-- frontend/templates/pages/contact.html --&gt;
{% extends 'base.html' %}

{% block content %}

    {% include 'include/breadcrumb.html' %}

    &lt;h1&gt;{{ object.title }}&lt;/h1&gt;

    {% if object.postal_address %}
        &lt;div class=&quot;alert alert-primary&quot; role=&quot;alert&quot;&gt;
            Почтовый адрес: {{ object.postal_address }}
        &lt;/div&gt;
    {% endif %}

    &lt;div&gt;{{ object.content|safe }}&lt;/div&gt;
{% endblock %}
</code></pre>
<p>И создадим в административной панели в Структуре страниц - "Contact":</p>
<ul>
<li>Название: Контакты</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
<li>Почтовый адрес: г. Москва</li>
<li>Содержание: Привет всем, вы можете оставить нам сообщение на этой странице.</li>
</ul>
<p>Получится нечто подобное:</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_contact_site.png" /></p>
<h5 id="322">3.2.2. Реализация формы обратной связи</h5>
<p>Теперь давайте реализуем форму обратной связи.</p>
<p>Сначала поправим шаблон. Добавим новый файл <code>frontend/templates/include/feedback.html</code>:</p>
<pre><code class="language-html">&lt;!-- frontend/templates/include/feedback.html --&gt;
&lt;form method=&quot;post&quot;&gt;
    {% csrf_token %}
    &lt;div class=&quot;row mb-3&quot;&gt;
        &lt;label for=&quot;inputEmail&quot; class=&quot;col-sm-2 col-form-label&quot;&gt;Email&lt;/label&gt;
        &lt;div class=&quot;col-sm-10&quot;&gt;
            &lt;input type=&quot;email&quot; name=&quot;email&quot; class=&quot;form-control&quot; id=&quot;inputEmail&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row mb-3&quot;&gt;
        &lt;label for=&quot;inputComment&quot; class=&quot;col-sm-2 col-form-label&quot;&gt;Комментарий&lt;/label&gt;
        &lt;div class=&quot;col-sm-10&quot;&gt;
            &lt;textarea class=&quot;form-control&quot; name=&quot;comment&quot; id=&quot;inputComment&quot; rows=&quot;3&quot;&gt;&lt;/textarea&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Отправить&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>И добавим его в шаблон страницы:</p>
<pre><code class="language-html">&lt;!-- frontend/templates/pages/contact.html --&gt;
{% extends 'base.html' %}

{% block content %}

    {% include 'include/breadcrumb.html' %}

    &lt;h1&gt;{{ object.title }}&lt;/h1&gt;

    {% if object.postal_address %}
        &lt;div class=&quot;alert alert-primary&quot; role=&quot;alert&quot;&gt;
            Почтовый адрес: {{ object.postal_address }}
        &lt;/div&gt;
    {% endif %}

    &lt;div&gt;{{ object.content|safe }}&lt;/div&gt;

    {% include 'include/feedback.html' %}
{% endblock %}
</code></pre>
<p>Теперь создадим модель для получения писем обратной связи:</p>
<pre><code class="language-python"># backend/contacts/models/feedback.py
from django.db import models


class Feedback(models.Model):
    email = models.EmailField(verbose_name='Email')
    comment = models.TextField(verbose_name='Комментарий')
    created_at = models.DateTimeField(auto_now_add=True, verbose_name='Дата создания')

    def __str__(self):
        return self.email

    class Meta:
        ordering = ('-created_at',)
        verbose_name = 'Обратная связь'
        verbose_name_plural = 'Обратная связь'
</code></pre>
<p>И не забывайте про <code>__init__.py</code>:</p>
<pre><code class="language-python"># backend/contacts/models/__init__.py
from .contact_page import ContactPage  # noqa
from .feedback import Feedback  # noqa
</code></pre>
<p>Создадим админку:</p>
<pre><code class="language-python"># backend/contacts/admin/feedback.py
from django.contrib import admin
from ..models.feedback import Feedback


@admin.register(Feedback)
class FeedbackAdmin(admin.ModelAdmin):
    list_display = ('email', 'comment', 'created_at')
    readonly_fields = ('created_at',)
</code></pre>
<p>И снова <code>__init__.py</code>:</p>
<pre><code class="language-python"># backend/contacts/admin/__init__.py
from .contact_page import ContactPageAdmin  # noqa
from .feedback import FeedbackAdmin  # noqa
</code></pre>
<p>Теперь давайте добавим форму:</p>
<pre><code class="language-python"># backend/contacts/forms/feedback.py
from django.forms import ModelForm
from ..models.feedback import Feedback


class FeedbackForm(ModelForm):
    class Meta:
        model = Feedback
        fields = ['email', 'comment']
</code></pre>
<p>И <code>__init__.py</code>:</p>
<pre><code class="language-python"># backend/contacts/forms/__init__.py
from .feedback import FeedbackForm  # noqa
</code></pre>
<p>Теперь давайте смигрируем:</p>
<pre><code class="language-bash">python3 backend/manage.py makemigrations
python3 backend/manage.py migrate
</code></pre>
<p>И реализуем обработчик формы через функцию <code>get_context</code> у модели страницы <code>ContactPage</code>:</p>
<pre><code class="language-python"># backend/contacts/models/contact_page.py
from django.db import models
from ckeditor_uploader.fields import RichTextUploadingField
from garpix_page.models import BasePage
from ..forms.feedback import FeedbackForm


class ContactPage(BasePage):
    content = RichTextUploadingField(verbose_name='Содержание', blank=True, default='')
    postal_address = models.CharField(max_length=250, blank=True, default='', verbose_name='Почтовый адрес')

    template = &quot;pages/contact.html&quot;

    def get_context(self, request=None, *args, **kwargs):
        context = super().get_context(request, *args, **kwargs)
        if request.method == 'POST':
            form = FeedbackForm(request.POST)
            if form.is_valid():
                form.save()
                context.update({
                    'message': 'Сообщение успешно отправлено',
                })
            context.update({
                'form': form,
            })
        return context

    class Meta:
        verbose_name = &quot;Contact&quot;
        verbose_name_plural = &quot;Contacts&quot;
        ordering = (&quot;-created_at&quot;,)
</code></pre>
<p>Как видим, мы сделали обработчик формы и расширили передаваемый в шаблон контекст.</p>
<p>Теперь добавим вывод <code>message</code>, когда он есть, в шаблоне.</p>
<pre><code class="language-html">&lt;!-- frontend/templates/include/feedback.html --&gt;
&lt;form method=&quot;post&quot;&gt;
    {% csrf_token %}
    &lt;div class=&quot;row mb-3&quot;&gt;
        &lt;label for=&quot;inputEmail&quot; class=&quot;col-sm-2 col-form-label&quot;&gt;Email&lt;/label&gt;
        &lt;div class=&quot;col-sm-10&quot;&gt;
            &lt;input type=&quot;text&quot; name=&quot;email&quot; value=&quot;{{ form.email.value }}&quot; class=&quot;form-control&quot; id=&quot;inputEmail&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class=&quot;row mb-3&quot;&gt;
        &lt;label for=&quot;inputComment&quot; class=&quot;col-sm-2 col-form-label&quot;&gt;Комментарий&lt;/label&gt;
        &lt;div class=&quot;col-sm-10&quot;&gt;
            &lt;textarea class=&quot;form-control&quot; required name=&quot;comment&quot; id=&quot;inputComment&quot; rows=&quot;3&quot;&gt;{{ form.comment.value }}&lt;/textarea&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Отправить&lt;/button&gt;
&lt;/form&gt;

{% if message %}
&lt;div class=&quot;alert alert-success mt-3&quot; role=&quot;alert&quot;&gt;
    {{ message }}
&lt;/div&gt;
{% endif %}

{% if form.errors %}
    &lt;div class=&quot;alert alert-danger mt-3&quot; role=&quot;alert&quot;&gt;
        &lt;div&gt;При отправке возникли ошибки:&lt;/div&gt;
        &lt;div&gt;{{ form.errors }}&lt;/div&gt;
    &lt;/div&gt;
{% endif %}
</code></pre>
<p>После этого можете зайти на страницу "Контакты" и отправить форму, в административной панели можно увидеть,
что все сохраняется, когда форма валидна.</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_contact_site_success.png" /></p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_contact_site_error.png" /></p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_contact_feedback.png" /></p>
<h5 id="323">3.2.3. Отправка уведомления</h5>
<p>Для завершения нашей формы обратной связи осталось отправить письмо по настоящему.</p>
<p>Для этого будем использовать батарейку <code>garpix_notify</code> и отправку писем по SMTP в ней. Эта батарейка уже встроена в GARPIX CMS.</p>
<p>Создадим в "Уведомления" - "Категории" новую запись:</p>
<ul>
<li>Заголовок: Стандарт</li>
<li>Шаблон: {{text}}</li>
</ul>
<p>Категории позволяют использовать одинаковую верстку (шапку, футер, подпись и т.п.) в уведомлениях. Для различных писем, можно использовать
различные категории.</p>
<p>Например, ввиду того, что мы будем отправлять обычное уведомление, то так его и назвали.</p>
<p>Теперь зайдем в "Уведомления" - "SMTP аккаунты" и добавим новую запись, используя данные SMTP вашего провайдера электронной почты.</p>
<p>Подготовка практически завершена. Давайте создадим событие, по которому будем отправлять письмо.
Для этого в <code>backend/app/settings.py</code> добавим следующее:</p>
<pre><code class="language-python"># backend/app/settings.py
from garpixcms.settings import *  # noqa

INSTALLED_APPS += [  # noqa
    'home',
    'contacts',
    'news',
    'search',
]

FEEDBACK_EVENT = 1

NOTIFY_EVENTS = {
    FEEDBACK_EVENT: {
        'title': 'Обратная связь',
    },
}

CHOICES_NOTIFY_EVENT = [(k, v['title']) for k, v in NOTIFY_EVENTS.items()]
</code></pre>
<p>Обратите внимание, что, обычно, на сайтах может использоваться множество событий для оповещения пользователя.
Давайте наиболее понятные имена для событий, т.к. с ними работает и разработчик и администратор сайта.</p>
<p>Добавим в обработку формы отправку уведомления:</p>
<pre><code class="language-python"># backend/contacts/models/contact_page.py
from django.db import models
from ckeditor_uploader.fields import RichTextUploadingField
from garpix_page.models import BasePage
from ..forms.feedback import FeedbackForm
from garpix_notify.models import Notify
from django.conf import settings


class ContactPage(BasePage):
    content = RichTextUploadingField(verbose_name='Содержание', blank=True, default='')
    postal_address = models.CharField(max_length=250, blank=True, default='', verbose_name='Почтовый адрес')

    template = &quot;pages/contact.html&quot;

    def get_context(self, request=None, *args, **kwargs):
        context = super().get_context(request, *args, **kwargs)
        if request.method == 'POST':
            form = FeedbackForm(request.POST)
            if form.is_valid():
                feedback = form.save()
                Notify.send(settings.FEEDBACK_EVENT, {
                    'feedback': feedback,
                }, email=feedback.email)
                context.update({
                    'message': 'Сообщение успешно отправлено',
                })
            context.update({
                'form': form,
            })
        return context

    class Meta:
        verbose_name = &quot;Contact&quot;
        verbose_name_plural = &quot;Contacts&quot;
        ordering = (&quot;-created_at&quot;,)
</code></pre>
<p>Мигрируем:</p>
<pre><code class="language-bash">python3 backend/manage.py makemigrations
python3 backend/manage.py migrate
</code></pre>
<p>Теперь идем в административную панель "Уведомления" - "Шаблоны" и создаем два шаблона.</p>
<p>Первый будет отправлять письмо администратору:</p>
<ul>
<li>Название для админа: Обратная связь - администратору</li>
<li>Заголовок: Новое сообщение обратной связи</li>
<li>Текст и HTML:</li>
</ul>
<pre><code>Получено новое сообщение:

Email: {{feedback.email}}
Комментарий: {{feedback.comment}}
</code></pre>
<ul>
<li>Пользователь (получатель): Указывайте свой аккаунт (убедитесь, что при создании пользователя указали email)</li>
<li>Тип: E-mail</li>
<li>Категория: Стандарт</li>
<li>Событие: Обратная связь</li>
</ul>
<p>Второе письмо будет отправляться на адрес указанного email.</p>
<ul>
<li>Название для админа: Обратная связь - клиенту</li>
<li>Заголовок: Спасибо за сообщение!</li>
<li>Текст и HTML:</li>
</ul>
<pre><code>Спасибо за сообщение!

Вы оставили следующий комментарий у нас на сайте:

{{feedback.comment}}
</code></pre>
<ul>
<li>Пользователь (получатель): Не указываем ничего</li>
<li>Тип: E-mail</li>
<li>Категория: Стандарт</li>
<li>Событие: Обратная связь</li>
</ul>
<p>Как результат, при срабатывании события FEEDBACK_EVENT будет срабатываться оба шаблона и будет отправляться два письма.
Если необходима отправка дополнительных писем или сообщений по другим каналам, то это тоже возможно.</p>
<p>Внимание! Письма отправляются в фоновом потоке, необходимо запустить <code>celery</code> в отдельном терминале:</p>
<pre><code class="language-bash">cd backend
celery -A app worker --loglevel=info -B
</code></pre>
<p>После этих действий попробуйте заполнить и отправить форму на лицевой части сайта.</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_site_feedback_pending.png" /></p>
<p>Примерно через минуту письма дойдут (можно изменить в "Уведомления" - "Настройка")</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_site_feedback_success.png" /></p>
<p>Итого, обратная связь полностью готова. Переходим к следующему пункту.</p>
<h4 id="33">3.3. Новости</h4>
<p>Мы уже создали списочную и детальную страницу новостей.</p>
<p>Давайте добавим поле <code>content</code> в детальную новость. Она станет очень похожа на другие наши модели, но
логично держать их в разных моделях. Списочную страницу менять не будем, но посмотрите на ее содержимое.</p>
<pre><code class="language-python"># backend/news/models/post_page.py
from ckeditor_uploader.fields import RichTextUploadingField
from garpix_page.models import BasePage


class PostPage(BasePage):
    content = RichTextUploadingField(verbose_name='Содержание', blank=True, default='')
    template = &quot;pages/post.html&quot;

    class Meta:
        verbose_name = &quot;Post&quot;
        verbose_name_plural = &quot;Posts&quot;
        ordering = (&quot;-created_at&quot;,)
</code></pre>
<p>Мигрируем:</p>
<pre><code class="language-bash">python3 backend/manage.py makemigrations
python3 backend/manage.py migrate
</code></pre>
<p>Теперь идем в админку и "Структуру страниц" и создаем сначала список новостей (<code>PostList</code>) и заполняем
следующим образом:</p>
<ul>
<li>Название: Новости</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
</ul>
<p>Затем создайте несколько новостей, например так:</p>
<p>Пост 1:</p>
<ul>
<li>Название: Пост 1</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
<li>Родительская страница: Новости</li>
<li>Содержание: Содержание поста 1</li>
</ul>
<p>Пост 2:</p>
<ul>
<li>Название: Пост 2</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
<li>Родительская страница: Новости</li>
<li>Содержание: Содержание поста 2</li>
</ul>
<p>Пост 3:</p>
<ul>
<li>Название: Пост 3</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
<li>Родительская страница: Новости</li>
<li>Содержание: Содержание поста 3</li>
</ul>
<p>Получится примерно следующее</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_news_admin.png" /></p>
<p>Давайте подправим шаблон детальной новости (мы же добавили новое поле):</p>
<pre><code class="language-html">&lt;!-- frontend/templates/pages/post.html --&gt;
{% extends 'base.html' %}

{% block content %}
    {% include 'include/breadcrumb.html' %}
    &lt;h1&gt;{{ object.title }}&lt;/h1&gt;
    &lt;div&gt;{{ object.content|safe }}&lt;/div&gt;
{% endblock %}
</code></pre>
<p>Теперь можете попробовать перейти по ссылке "Новости" в "Структуре страниц" и увидите, работающие переходы между страницами и хлебными крошками. Также, вы можете добавить большое количество постов
или уменьшить значение <code>paginated_by</code> в модели <code>PostList</code> для того, чтобы появилась пагинация.</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_site_news.png" /></p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_site_news_post.png" /></p>
<p>С новостями готово, пошли к следующему шагу.</p>
<h4 id="34">3.4. Страница поиска</h4>
<p>Идем в "Структура страниц" и добавляем страницу <code>Search</code> и заполняем ее:</p>
<ul>
<li>Название: Поиск</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
</ul>
<p>Готово. По умолчанию поиск только по заголовкам страниц.</p>
<p>Попробуйте перейти на страницу на лицевой части сайта и вбить заголовок одной из страниц, получите
нечто подобное:</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_site_search.png" /></p>
<p>Для того, чтобы поиск шел также по содержимому, то добавьте поля в <code>searchable_fields</code> у модели.</p>
<p>Давайте поменяем это у новостей:</p>
<pre><code class="language-python"># backend/news/models/post_page.py
from ckeditor_uploader.fields import RichTextUploadingField
from garpix_page.models import BasePage


class PostPage(BasePage):
    content = RichTextUploadingField(verbose_name='Содержание', blank=True, default='')
    template = &quot;pages/post.html&quot;
    searchable_fields = ['title', 'content']

    class Meta:
        verbose_name = &quot;Post&quot;
        verbose_name_plural = &quot;Posts&quot;
        ordering = (&quot;-created_at&quot;,)
</code></pre>
<p>Теперь можете поискать по содержимому новостей.</p>
<p>Обратите внимание, что данный поиск простейший и не полнотекстовый. Используйте его только тогда, когда нет особых требований для поиска.
Когда нужен серьезный инструмент для поиска - используйте ElasticSearch или аналогичные решения.</p>
<p>С поиском закончили, переходим к следующему шагу.</p>
<h4 id="35">3.5. Страница "О нас"</h4>
<p>Будем использовать встроенный <code>Page</code>.</p>
<p>Идем в "Структура страниц", добавляем и выбираем "Страница", заполняем данными:</p>
<ul>
<li>Название: О нас</li>
<li>ЧПУ: автоматически</li>
<li>Сайты для отображения: Выбираем единственное значение</li>
<li>Содержание: Контент о нас.</li>
</ul>
<p>Обычно требуется изменять внешний вид страниц, для этого просто перезапишите шаблон <code>frontend/templates/garpixcms/pages/default.html</code>.</p>
<h4 id="36">3.6. Меню</h4>
<p>Со страницами закончили, теперь добавим удобства, создав меню.</p>
<p>Для этого изменим доступные меню в <code>backend/app/settings.py</code>, добавим следующий код:</p>
<pre><code class="language-python"># ...

MENU_TYPE_HEADER_MENU = 'header_menu'

MENU_TYPES = {
    MENU_TYPE_HEADER_MENU: {
        'title': 'Верхнее меню',
    },
}

CHOICE_MENU_TYPES = [(k, v['title']) for k, v in MENU_TYPES.items()]
</code></pre>
<p>Теперь удалите ненужное меню в футере:</p>
<ul>
<li>В файле <code>frontend/templates/base.html</code> убрать строку <code>{% include 'include/footer.html' %}</code>.</li>
<li>Удалить файл <code>frontend/templates/include/footer.html</code>.</li>
</ul>
<p>После этого мигрируем.</p>
<pre><code class="language-bash">python3 backend/manage.py makemigrations
python3 backend/manage.py migrate
</code></pre>
<p>Идем в админку "Меню" - "Пункты меню" и заполняем:</p>
<p>Главная:</p>
<ul>
<li>Название для админа: Главная</li>
<li>Название: Главная</li>
<li>Тип меню: Верхнее меню</li>
<li>Страница, на которую ведет пункт меню: Главная страница</li>
<li>Сортировка: 50</li>
</ul>
<p>Новости:</p>
<ul>
<li>Название для админа: Новости</li>
<li>Название: Новости</li>
<li>Тип меню: Верхнее меню</li>
<li>Страница, на которую ведет пункт меню: Новости</li>
<li>Сортировка: 100</li>
</ul>
<p>О нас:</p>
<ul>
<li>Название для админа: О нас</li>
<li>Название: О нас</li>
<li>Тип меню: Верхнее меню</li>
<li>Страница, на которую ведет пункт меню: О нас</li>
<li>Сортировка: 150</li>
</ul>
<p>Поиск:</p>
<ul>
<li>Название для админа: Поиск</li>
<li>Название: Поиск</li>
<li>Тип меню: Верхнее меню</li>
<li>Страница, на которую ведет пункт меню: Поиск</li>
<li>Сортировка: 200</li>
</ul>
<p>Контакты:</p>
<ul>
<li>Название для админа: Контакты</li>
<li>Название: Контакты</li>
<li>Тип меню: Верхнее меню</li>
<li>Страница, на которую ведет пункт меню: Контакты</li>
<li>Сортировка: 250</li>
</ul>
<p>После добавления меню, вы сможете перемещаться по сайту. Количество типов меню также не ограничивается, но будьте аккуратны с неймингом.</p>
<p><img alt="Изображение" src="/example_simple_templates_site/images/corp_site_menu.png" /></p>
<h4 id="37">3.7. Карта сайта</h4>
<p>Обратите внимание, что из коробки строится карта сайта из всех страниц.</p>
<p>Увидеть ее вы можете по адресу <a href="http://localhost:8000/sitemap.xml">http://localhost:8000/sitemap.xml</a></p>
<p>Для смены домена используются обычный <code>Sites Framework</code>. Поменять адрес можно в административной панели в "Сайты" - "Сайты".</p>
<p>На этом все, наш простой корпоративный сайт готов. Спасибо за внимание и успехов вам!</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.19047be9.min.js"></script>
      
    
  </body>
</html>